syntax = "proto3";

message PortalSubscriptionResponse {
  uint32 site_id = 1;
}

message RouterMessage {
  oneof variant {
    Notification notification = 2;
    Request request = 3;
    Response response = 4;
  }

  message Notification {
    string channel_id = 1;
    bytes body = 2;
  }

  message Request {
    string channel_id = 1;
    uint32 request_id = 2;
    bytes body = 3;
  }

  message Response {
    uint32 request_id = 1;
    bytes body = 2;
  }
}

message NetworkMessage {
  string network_id = 1;

  oneof variant {
    StarConnection star_connection = 2;
    StarUnicast star_unicast = 3;
    StarBroadcast star_broadcast = 4;
  }

  message StarConnection {}

  message StarUnicast {
    string sender_id = 1;
    string recipient_id = 2;
    bytes body = 3;
  }

  message StarBroadcast {
    string sender_id = 1;
    bytes body = 2;
  }
}
